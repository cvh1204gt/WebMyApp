<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org">

<head th:fragment="page_head">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!--========== BOX ICONS ==========-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">

  <!--========== FONT AWESOME ==========-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <!--========== CSS ==========-->
  <!-- <link rel="stylesheet" href="assets/css/styles.css"> -->

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

  <link rel="stylesheet" href="/css/styles.purged.css">

  <!--========== MAIN JS ==========-->

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>

  <script defer src="/js/main.js"></script>

  <title>Gói dịch vụ</title>
</head>

<body>
  <!--========== HEADER ==========-->
  <header class="header" th:fragment="page_header">
    <div class="header__container">
      <img src="/image/profile.png" alt="" class="header__img">

      <a href="#" class="header__logo">
        <img src="" alt="">
      </a>

      <div class="header__search">
        <input type="search" placeholder="Tìm kiếm..." class="header__input">
        <i class='bx bx-search header__icon'></i>
      </div>

      <div class="header__toggle">
        <i class='bx bx-menu' id="header-toggle"></i>
      </div>
    </div>
  </header>

  <!--========== NAV ==========-->
  <div class="nav" id="navbar" th:fragment="page_navbar">
    <nav class="nav__container">
      <div>
        <a href="#" class="nav__link nav__logo">
          <i class='bx bxs-disc nav__icon'></i>
          <span class="nav__logo-name">IMT</span>
        </a>

        <div class="nav__list">
          <div class="nav__items">
            <h3 class="nav__subtitle">Hồ sơ</h3>

            <a href="/home" class="nav__link">
              <i class='bx bx-home nav__icon'></i>
              <span class="nav__name">Trang chủ</span>
            </a>

            <a href="/profile" class="nav__link">
              <i class='bx bx-user nav__icon'></i>
              <span class="nav__name">Thông tin</span>
            </a>

          </div>

          <div class="nav__items">
            <h3 class="nav__subtitle">Quản lý</h3>

            <!-- <div class="nav__dropdown" sec:authorize="hasRole('ADMIN')">
              <a href="#" class="nav__link">
                <i class='bx bxs-user-account nav__icon'></i>
                <span class="nav__name">Quản lý</span>
                <i class='bx bx-chevron-down nav__icon nav__dropdown-icon'></i>
              </a>

              <div class="nav__dropdown-collapse">
                <div class="nav__dropdown-content">
                  <a href="/admin/account_management" class="nav__dropdown-item">Tài khoản</a>
                  <a href="/lichsugiaodich" class="nav__dropdown-item">Giao dịch</a>
                  <a href="/service_management" class="nav__dropdown-item">Gói dịch vụ</a>
                  <a href="/logs" class="nav__dropdown-item" sec:authorize="hasRole('ADMIN')">Log</a>
                  <a href="/thongkegiaodich" class="nav__dropdown-item">Thong ke</a>
                </div>
              </div>
            </div> -->

            <a href="/admin/account_management" class="nav__link" sec:authorize="hasRole('ADMIN')">
              <i class='bx bx-id-card nav__icon'></i>
              <span class="nav__name">Tài khoản</span>
            </a>

            <a href="/lichsugiaodich" class="nav__link" sec:authorize="hasRole('ADMIN')">
              <i class='bx bx-transfer-alt nav__icon'></i>
              <span class="nav__name">Giao dịch</span>
            </a>

            <a href="/servicepacks" class="nav__link" sec:authorize="hasRole('ADMIN')">
              <i class='bx bx-package nav__icon'></i>
              <span class="nav__name">Gói dịch vụ</span>
            </a>

            <a href="/logs" class="nav__link" sec:authorize="hasRole('ADMIN')">
              <i class='bx bx-file nav__icon'></i>
              <span class="nav__name">Log</span>
            </a>

            <a href="/thongkegiaodich" class="nav__link" sec:authorize="hasRole('ADMIN')">
              <i class='bx bx-bar-chart-alt-2 nav__icon'></i>
              <span class="nav__name">Thống kê</span>
            </a>








            <a href="/services" class="nav__link" sec:authorize="hasAnyRole('CLIENT', 'ADMINDICHVU')">
              <i class='bx bx-package nav__icon'></i>
              <span class="nav__name">Gói dịch vụ</span>
            </a>

            <a href="/recharge" class="nav__link" sec:authorize="hasAnyRole('CLIENT', 'ADMINDICHVU')">
              <i class='bx bx-dollar-circle nav__icon'></i>
              <span class="nav__name">Nạp tiền</span>
            </a>

            <a href="/user_transactions" class="nav__link" sec:authorize="hasAnyRole('CLIENT', 'ADMINDICHVU')">
              <i class='bx bx-transfer-alt nav__icon'></i>
              <span class="nav__name">Giao dịch</span>
            </a>

            <!-- Thành viên: chỉ hiển thị nếu có ít nhất 1 gói dịch vụ -->
            <th:block th:if="${packs != null and !#lists.isEmpty(packs)}">
              <a th:href="@{'/servicepacks/members'}" class="nav__link" sec:authorize="hasRole('ADMINDICHVU')">
                <i class='bx bx-user-plus nav__icon'></i>
                <span class="nav__name">Thành viên</span>
              </a>
            </th:block>


          </div>
        </div>
      </div>

      <!-- <a href="#" class="nav__link nav__logout">
        <i class='bx bx-log-out nav__icon'></i>
        <span class="nav__name">Đăng xuất</span>
      </a> -->

      <form sec:authorize="isAuthenticated()" method="post" action="/logout" style="margin-top: 5rem;">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
        <button type="submit" class="nav__logout">
          <i class='bx bx-log-out nav__icon'></i>
          <span class="nav__name">Đăng xuất</span>
        </button>
      </form>
    </nav>
  </div>

</body>

</html>